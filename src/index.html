<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Agrobase</title>
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
  </head>
  <body>
    <script type="text/javascript">
      require('jquery');
      require('popper.js');
      require('bootstrap');
      require('electron');
    </script>

    <div class="container-fluid">
      <div class="row">
        <div class="col-6">
          <div class="card text-white bg-primary mt-3">
            <div class="card-header" style="text-align: center">
              <div class="row">
                <div class="col-2">
                  <button id="button_prev_day" class="btn btn-secondary text-white" onclick="prevDay()"><<<</button>
                </div>
                <div class="col-8">
                  <h3 id="current_date"></h3>
                  <script type="text/javascript">
                    let date = new Date();
                    let dd = String(date.getDate()).padStart(2, '0');
                    let mm = String(date.getMonth() + 1).padStart(2, '0');
                    let yyyy = date.getFullYear();
                    date = mm + '/' + dd + '/' + yyyy;
                    document.getElementById('current_date').innerHTML = date;
                  </script>
                </div>
                <div class="col-2">
                  <button id="button_next_day" class="btn btn-secondary text-white" onclick="nextDay()">>>></button>
                </div>
                <script type="text/javascript">
                  function prevDay(){
                    let date = document.getElementById('current_date').innerHTML;
                    let mm = date.substring(0, 2);
                    let dd = date.substring(3, 5);
                    let yyyy = date.substring(6);
                    date = new Date(yyyy, mm - 1, dd);
                    date.setDate(date.getDate() - 1);
                    dd = String(date.getDate()).padStart(2, '0');
                    mm = String(date.getMonth() + 1).padStart(2, '0');
                    yyyy = date.getFullYear();
                    date = mm + '/' + dd + '/' + yyyy;
                    document.getElementById('current_date').innerHTML = date;
                  }
                  function nextDay(){
                    let date = document.getElementById('current_date').innerHTML;
                    let mm = date.substring(0, 2);
                    let dd = date.substring(3, 5);
                    let yyyy = date.substring(6);
                    date = new Date(yyyy, mm - 1, dd);
                    date.setDate(date.getDate() + 1);
                    dd = String(date.getDate()).padStart(2, '0');
                    mm = String(date.getMonth() + 1).padStart(2, '0');
                    yyyy = date.getFullYear();
                    date = mm + '/' + dd + '/' + yyyy;
                    document.getElementById('current_date').innerHTML = date;
                  }
                </script>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col" style="max-height: 100%">
                  <table id="" class="table">
                    <!-- table rows to be added here (imported from file) -->
                  </table>
                </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="dropdown">
                    <button type="button" id="button_dropdown" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Announcement</button>
                    <div class="dropdown-menu">
                      <button id="dditem_ann" class="dropdown-item" href="#" onclick="changeAnn()">Announcement</button>
                      <button id="dditem_event" class="dropdown-item" href="#" onclick="changeEvent()">Event</button>
                    </div>
                  </div>
                </div>
                <script type="text/javascript">
                function SubmitButtonFunction() {
                  const{ ipcRenderer } = window.require('electron');
                  ipcRenderer.send('SubmitButtonClick');
                }
                  function changeAnn(){
                    document.getElementById('button_dropdown').innerHTML = 'Announcement';
                    document.getElementById('input_time').style.display = 'none';
                    document.getElementById('AMPM_dropdown').style.display = 'none';
                  }
                  function changeEvent(){
                    document.getElementById('button_dropdown').innerHTML = 'Event';
                    document.getElementById('input_time').style.display = 'block';
                    document.getElementById('AMPM_dropdown').style.display = 'block';
                  }
                  function changeAM(){
                    document.getElementById('AMPM_dropdown').innerHTML = 'AM';
                  }
                  function changePM(){
                  document.getElementById('AMPM_dropdown').innerHTML = 'PM';
                  }
                </script>
                <input type="text" id="input_time" class="form-control" placeholder="Time (02:00)" style="display: none;">
                <div class="dropdown">
                  <button type="button" id="AMPM_dropdown" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style = "display: none;">AM</button>
                  <div class="dropdown-menu">
                    <button id="AM_Button" class="dropdown-item" href="#" onclick="changeAM()">AM</button>
                    <button id="PM_Button" class="dropdown-item" href="#" onclick="changePM()">PM</button>
                  </div>
                </div>
                <input type="text" id="input_announcement_event" class="form-control" placeholder="Information" style="width: 50%">
                <div class="input-group-append">
                  <button id="SubmitButton" class="btn btn-secondary text-white" onclick="SubmitButtonFunction()">Submit</button>
                  <script type="text/javascript">
                    function SubmitButtonFunction() {
                      const { ipcRenderer } = window.require('electron');
                      let date = document.getElementById('current_date').innerHTML;
                      let mm = date.substring(0, 2);
                      let dd = date.substring(3, 5);
                      let yyyy = date.substring(6);
                      var AMPM = '';
                      if(document.getElementById('button_dropdown').innerHTML == 'Event') {
                        AMPM = document.getElementById('AMPM_dropdown').innerHTML;
                      }
                      let args = [mm + dd + yyyy, document.getElementById('input_time').value + AMPM , document.getElementById('input_announcement_event').value];
                      ipcRenderer.send('SubmitButtonClick', args);
                    }
                  </script>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-6">

        </div>
      </div>
    </div>
  </body>
</html>
